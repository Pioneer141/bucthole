(function(t){function e(e){for(var o,s,a=e[0],r=e[1],l=e[2],d=0,u=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);c&&c(e);while(u.length)u.shift()();return _.push.apply(_,l||[]),n()}function n(){for(var t,e=0;e<_.length;e++){for(var n=_[e],o=!0,a=1;a<n.length;a++){var r=n[a];0!==i[r]&&(o=!1)}o&&(_.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},i={app:0},_=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var c=r;_.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"176d":function(t,e,n){},"22ac":function(t,e,n){"use strict";n("6ceb")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"left",staticStyle:{left:"0"}},[n("MapSelect")],1),n("div",{staticClass:"left",staticStyle:{left:"300px"}},[n("div",{staticClass:"up"},[n("MapInfo")],1),n("div",{staticClass:"down"},[n("InputForm")],1)]),n("div",{staticClass:"left",staticStyle:{left:"600px"}},[n("HistoryInfo")],1),n("div",{staticClass:"center"},[n("MapView",{staticClass:"center"})],1)])},_=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"MapSelect"}},[n("div",{staticStyle:{"overflow-y":"auto",height:"100%",width:"100%"}},[n("table",{staticClass:"table table-hover table-striped"},[t._m(0),n("tbody",t._l(t.blocks,(function(e,o){return n("tr",{key:o,on:{click:function(n){return t.click_block(e["id"])}}},[n("td",[t._v(t._s(e["id"]))]),n("td",[t._v(t._s(e["len"]))])])})),0)])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("td",[t._v("序号")]),n("td",[t._v("描述数量")])])])}],r={name:"MapSelect",methods:{update_block_list:function(){this.blocks=window.get_map_info()["block_list"],console.log("更新地图区块显示列表",this.blocks)},click_block:function(t){window.set_block(t),window.show_block(t)}},mounted:function(){window.update_block=this.update_block_list},data:function(){return{blocks:[]}}},l=r,c=(n("662d"),n("2877")),d=Object(c["a"])(l,s,a,!1,null,"48d44465",null),u=d.exports,p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{height:"100%",width:"100%"}},[n("div",{attrs:{id:"map-view"}})])}],b={name:"MapView",data:function(){return{}},created:function(){},methods:{build_map:function(){var t=new window.BMapGL.Map("map-view");window.map_sdk=t,this.build_control()},build_control:function(){var t=window.map_sdk;t.disableDoubleClickZoom(),t.disableDragging(),t.disableRotate(),t.disableScrollWheelZoom(),t.disableTilt(),t.addControl(new window.BMapGL.ScaleControl),t.addControl(new window.BMapGL.MapTypeControl)},raster_map:function(t){for(var e=window.map_sdk,n=0;n<t.length;n++){var o=t[n]["rect"],i=[new window.BMapGL.Point(o["left-up"]["lng"],o["left-up"]["lat"]),new window.BMapGL.Point(o["right-up"]["lng"],o["right-up"]["lat"]),new window.BMapGL.Point(o["right-down"]["lng"],o["right-down"]["lat"]),new window.BMapGL.Point(o["left-down"]["lng"],o["left-down"]["lat"])],_=new window.BMapGL.Polygon(i,{strokeColor:"#0f0",strokeWeight:1,strokeOpacity:.5});e.addOverlay(_)}},show_block:function(t){var e=window.map_sdk,n=window.get_map_info(),o=n["blocks"];if(t<0||t>=o.length)console.log("显示区块 下标超界");else{var i=n["lng"]-n["step"]/2,_=n["lat"]+n["step"]/2;e.centerAndZoom(new window.BMapGL.Point(i,_),n["zoom"])}}},mounted:function(){window.show_block=this.show_block,window.raster_map=this.raster_map,this.build_map()}},m=b,h=(n("f7ba"),Object(c["a"])(m,p,f,!1,null,"56ccff6e",null)),w=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"panel panel-default",attrs:{id:"MapInfo"}},[n("div",[n("table",{staticClass:"table table-hover table-striped"},[n("tbody",[n("tr",[n("td",[t._v("当前区块号")]),n("td",[t._v(t._s(t.block_index))])])])])]),n("div",[n("table",{staticClass:"table table-hover table-striped"},[t._m(0),n("tbody",[n("tr",[n("td",[t._v("左上角经纬度")]),n("td",[t._v(t._s(t._f("toFixed")(t.lng,t.number_bit)))]),n("td",[t._v(t._s(t._f("toFixed")(t.lat,t.number_bit)))])]),n("tr",[n("td",[t._v("右上角经纬度")]),n("td",[t._v(t._s(t._f("toFixed")(t.lng,t.number_bit)))]),n("td",[t._v(t._s(t._f("toFixed")(t.lat+t.step,t.number_bit)))])]),n("tr",[n("td",[t._v("左下角经纬度")]),n("td",[t._v(t._s(t._f("toFixed")(t.lng-t.step,t.number_bit)))]),n("td",[t._v(t._s(t._f("toFixed")(t.lat,t.number_bit)))])]),n("tr",[n("td",[t._v("右下角经纬度")]),n("td",[t._v(t._s(t._f("toFixed")(t.lng-t.step,t.number_bit)))]),n("td",[t._v(t._s(t._f("toFixed")(t.lat+t.step,t.number_bit)))])]),n("tr",[n("td",[t._v("中心点经纬度")]),n("td",[t._v(t._s(t._f("toFixed")(t.lng-t.step/2,t.number_bit)))]),n("td",[t._v(t._s(t._f("toFixed")(t.lng-t.step/2,t.number_bit)))])])])])])])},g=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("td",[t._v("位置")]),n("td",[t._v("lng")]),n("td",[t._v("lat")])])}],k=n("668c"),x=k["a"],y=(n("7634"),Object(c["a"])(x,v,g,!1,null,"87935986",null)),M=y.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"InputForm"}},[n("form",{attrs:{id:"dataForm"}},[n("div",{staticClass:"form-group",staticStyle:{width:"100%"}},[n("label",{attrs:{for:"inputData"}},[t._v("地图描述")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.describe,expression:"describe"}],staticClass:"form-control",staticStyle:{height:"300px"},attrs:{id:"inputData",placeholder:"请输入地图描述",maxlength:t.max_text_length},domProps:{value:t.describe},on:{input:function(e){e.target.composing||(t.describe=e.target.value)}}}),n("div",{staticStyle:{"text-align":"left"}},[n("span",[t._v(t._s(t.describe.length))]),t._v("/"),n("span",[t._v(t._s(t.max_text_length))])])]),n("div",{staticClass:"btn-group",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-primary operation-btn",attrs:{type:"button"},on:{click:t.submit}},[t._v("提交")])])])])},O=[],j=(n("d3b7"),n("25f0"),{name:"InputForm",data:function(){return{max_text_length:300,describe:""}},methods:{get_describe:function(){return this.describe},submit:function(){if(0!==this.describe.length){var t=window.get_map_info();window.$.get(window.base_url+"/put/note/?blockid="+t["block_index"].toString()+"&userdata="+this.describe,(function(t){console.log(t),window.update_map_info()}))}else alert("描述不能为空")}},created:function(){}}),P=j,C=(n("22ac"),Object(c["a"])(P,E,O,!1,null,"887e7568",null)),D=C.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"HistoryInfo"}},[n("div",{staticClass:"panel panel-default",staticStyle:{"overflow-y":"auto",width:"100%",position:"absolute",bottom:"400px"}},[n("table",{staticClass:"table table-hover table-striped"},[n("tbody",{attrs:{id:"history-list-table"}},[t._m(0),t._l(t.history,(function(e,o){return n("tr",{key:o,on:{click:function(n){return t.set_textarea_value(e)}}},[n("td",[t._v(t._s(t._f("setW")(e,4)))])])}))],2)])]),n("div",{staticStyle:{width:"100%",position:"absolute",bottom:"50px"}},[n("form",{attrs:{id:"dataForm"}},[n("div",{staticClass:"form-group"},[t._m(1),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.history_text,expression:"history_text"}],staticClass:"form-control",staticStyle:{width:"100%",height:"300px","font-size":"23px",resize:"none"},attrs:{id:"dataInfo",readonly:"readonly"},domProps:{value:t.history_text},on:{input:function(e){e.target.composing||(t.history_text=e.target.value)}}})])])])])},S=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v("摘要")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{attrs:{for:"dataInfo"}},[t._v("历史描述 "),n("span",{attrs:{id:"time"}})])}],B={name:"HistoryInfo",filters:{setW:function(t,e){return null==t?"":t.length<=e?t:t.substr(0,e)+"..."}},methods:{set_textarea_value:function(t){this.history_text=t},update_history_info:function(){var t=window.get_map_info();this.history=t["history_data"]}},mounted:function(){window.update_history_info=this.update_history_info},data:function(){return{history:[],history_text:""}}},L=B,F=(n("81b4"),Object(c["a"])(L,I,S,!1,null,"05f86284",null)),T=F.exports,W={name:"App",components:{HistoryInfo:T,InputForm:D,MapInfo:M,MapView:w,MapSelect:u}},$=W,A=(n("034f"),Object(c["a"])($,i,_,!1,null,null,null)),R=A.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(R)}}).$mount("#app")},"662d":function(t,e,n){"use strict";n("b37a")},"668c":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("b680"),core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_3__);__webpack_exports__["a"]={name:"MapInfo",methods:{set_map_info:function(t){this.lng_range=t["lng"],this.lat_range=t["lat"],this.step=t["step"],this.zoom=t["zoom"],this.block_list=t["block_list"],this.blocks=t["blocks"],this.need_raster&&(window.raster_map(this.blocks),this.need_raster=!1),this.blocks.length>0&&this.block_index<this.blocks.length&&(window.show_block(this.block_index),this.set_block(this.block_index))},set_position:function(t,e){this.lng=t,this.lat=e},set_block:function set_block(index){if(index<0||index>=this.blocks.length)console.log("设置区块编号 超界");else{console.log("设置当前区块编号为 "+index.toString()),this.block_index=index;var block=this.blocks[index]["rect"];this.set_position(eval(block["left-up"]["lng"]),eval(block["left-up"]["lat"])),this.update_map_info_detail(index)}},update_map_info:function update_map_info(){console.log("更新地图信息"),window.$.get(window.base_url+"/api/getMapInfo",(function(e){var data=eval(e);console.log(data),window.set_map_info(data),window.update_block()}))},update_map_info_detail:function update_map_info_detail(index){console.log("获取地图详细信息 编号:"+index.toString()),window.$.get(window.base_url+"/get/note/?blockid="+index.toString(),(function(e){var data=eval(e);console.log(data),window.set_history(data["note"]),window.update_history_info()}))},set_history:function(t){console.log(t),this.history_data=t},get_map_info:function(){return{lng:this.lng,lat:this.lat,step:this.step,block_index:this.block_index,zoom:this.zoom,history_data:this.history_data,block_list:this.block_list,blocks:this.blocks}}},created:function(){this.update_map_info()},mounted:function(){window.set_block=this.set_block,window.update_map_info=this.update_map_info,window.update_map_info_detail=this.update_map_info_detail,window.get_map_info=this.get_map_info,window.set_map_info=this.set_map_info,window.set_history=this.set_history},data:function(){return{zoom:18,lng_range:{min:116.2,max:116.5},lat_range:{min:39.8,max:40},lng:116.2,lat:39.8,step:.02,blocks:[],block_list:[],block_index:0,number_bit:2,history_data:[],need_raster:!0}},filters:{toFixed:function(t,e){return Number(t).toFixed(e)}}}},"6ceb":function(t,e,n){},7119:function(t,e,n){},7634:function(t,e,n){"use strict";n("176d")},"81b4":function(t,e,n){"use strict";n("929b")},"85ec":function(t,e,n){},"929b":function(t,e,n){},b37a:function(t,e,n){},f7ba:function(t,e,n){"use strict";n("7119")}});
//# sourceMappingURL=app.5fbd894b.js.map